from tkinter import *
from tkinter import font
import urllib
import urllib.request


DataList = []

import http.client
from xml.dom.minidom import parse, parseString

conn = None

server = "api.visitkorea.or.kr"
servicekey = "QZ8JKaSvORPU%2F0gzUXOjsmxrgd5D59mpLe2WJTl1Ttr7f746Meax%2Fj0wGnyJN4qFLQ%2FJIEz5rxAq3SDI59yLTw%3D%3D"
conn = http.client.HTTPConnection(server)
conn.request("GET", "/openapi/service/rest/KorService/searchStay?serviceKey=" + servicekey +
    "&numOfRows=10&pageSize=10&pageNo=1&startPage=1&MobileOS=ETC&MobileApp=AppTest&arrange=A&listYN=Y")
req = conn.getresponse()

if int(req.status) == 200:
    response_body = req.read().decode('utf-8')
    print(response_body)

    parseData = parseString(response_body)

    print(parseData)

    GeoInfoWhere = parseData.childNodes
    row = GeoInfoWhere[0].childNodes[1].childNodes[0].childNodes

    print(row)

    global DataList
    DataList.clear()
    for item in row:
        list = item.childNodes
        print(list)
        for l in list:
            if l.nodeName == 'addr1':
                DataList.append(l.firstChild.nodeValue)
            if l.nodeName == 'firstimage':
                DataList.append(l.firstChild.nodeValue)
            if l.nodeName == 'tel':
                DataList.append(l.firstChild.nodeValue)
            if l.nodeName == 'title':
                DataList.append(l.firstChild.nodeValue)
                RenderText.insert(END, l.firstChild.nodeValue)
else:
    print("Error")
